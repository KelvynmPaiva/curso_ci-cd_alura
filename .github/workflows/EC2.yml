name: Entrega cont√≠nua

on:
  workflow_call: 

jobs:

    docker:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v3
        
        - name: Download a Build Artifact
          uses: actions/download-artifact@v3
          with:
            name: programa 

        - name: Deploy to Staging server
          uses: easingthemes/ssh-deploy@main
          env:
            SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
            REMOTE_HOST: ${{ secrets.REMOTE_HOST }}
            REMOTE_USER: ${{ secrets.REMOTE_USER }}
            TARGET: /home/${{secrets.REMOTE_USER}}
            EXCLUDE: "postgres-data"
